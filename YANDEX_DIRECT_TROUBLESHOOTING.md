# Решение проблем с Яндекс.Директ API

## Ошибка: "Неизвестно приложение с таким client_id" (400)

### Причина 1: Неправильный ClientID

**Решение:**
1. Проверьте ClientID в панели OAuth: [https://oauth.yandex.ru/](https://oauth.yandex.ru/)
2. Убедитесь, что скопировали полностью, без пробелов
3. Ваш ClientID должен быть: `Oc7090eb0fb140b799538371de732a42`

### Причина 2: Приложение не активировано

**Решение:**
1. Зайдите на [https://oauth.yandex.ru/](https://oauth.yandex.ru/)
2. Найдите ваше приложение
3. Убедитесь, что оно активно
4. Проверьте, что включены права "Яндекс.Директ"

### Причина 3: Неправильный аккаунт

**Решение:**
- Войдите в тот же аккаунт Яндекс, где создавали приложение
- Или создайте новое приложение в текущем аккаунте

## Альтернативный способ: Токен разработчика

Если OAuth не работает, используйте токен разработчика:

1. **Войдите в Яндекс.Директ**: [https://direct.yandex.ru/](https://direct.yandex.ru/)
2. **Перейдите**: Настройки → API → Токен разработчика
3. **Создайте токен** (если еще нет)
4. **Используйте этот токен** в `.env.local`:
   ```bash
   YANDEX_DIRECT_ACCESS_TOKEN=ваш_токен_разработчика
   ```

**Важно:** Токен разработчика работает только с тестовыми кампаниями!

## Проверка ClientID и Client Secret

Убедитесь, что данные правильные:

```bash
# ClientID (без пробелов)
Oc7090eb0fb140b799538371de732a42

# Client Secret (без пробелов)
65813929bf394de8aa528b07696fc034
```

## Создание нового OAuth приложения

Если текущее не работает, создайте новое:

1. Зайдите на [https://oauth.yandex.ru/](https://oauth.yandex.ru/)
2. Нажмите "Создать новое приложение"
3. Заполните:
   - **Название**: Vibecoding Direct Optimizer
   - **Платформы**: Веб-сервисы
   - **Redirect URI**: `https://oauth.yandex.ru/verification_code`
   - **Права**: Яндекс.Директ (все права)
4. Сохраните и скопируйте новый ClientID и Client Secret

## Проверка работы API

После настройки токена проверьте:

```bash
# Тест получения кампаний
curl -X GET https://grifun.ru/api/yandex-direct/campaigns

# Если ошибка - проверьте логи
sudo journalctl -u vibecoding -n 50
```

## Полезные ссылки

- [OAuth Яндекс](https://oauth.yandex.ru/)
- [Документация API Яндекс.Директа](https://yandex.ru/dev/direct/doc/ru/concepts/overview)
- [Настройки API в Яндекс.Директе](https://direct.yandex.ru/)






