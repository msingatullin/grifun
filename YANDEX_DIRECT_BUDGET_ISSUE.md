# ⚠️ Проблема с установкой бюджета для перфоманс-кампаний

## Проблема

При попытке установить дневной бюджет для перфоманс-кампании через API Яндекс.Директа возникает ошибка:

```
"Daily budget can only be used in conjuction with manual strategies"
"Inconsistent object state"
```

## Причина

Для перфоманс-кампаний (`Type: 'PERFORMANCE'`) дневной бюджет (`DailyBudget`) можно использовать **только** с ручной стратегией ставок (`MANUAL_CPC`).

Однако, согласно документации API Яндекс.Директа v5, **нельзя установить стратегию через `campaigns.update`** для перфоманс-кампаний. При попытке установить `BiddingStrategy` через `campaigns.update` возникает ошибка:

```
"An item in the Campaigns array contains the unknown parameter BiddingStrategy"
```

## Текущее решение

1. Система пытается автоматически установить стратегию перед установкой бюджета
2. Если это не получается (что вероятно для перфоманс-кампаний), возвращается понятное сообщение об ошибке
3. Пользователь должен установить стратегию вручную в интерфейсе Яндекс.Директа

## Альтернативные варианты

### Вариант 1: Использовать другой метод API
Проверить, можно ли установить стратегию через:
- `bids.setAuto` - установка автоматических ставок
- Другой endpoint для управления стратегиями

### Вариант 2: Принять ограничение API
- Требовать от пользователя установить стратегию вручную
- Улучшить сообщения об ошибках
- Добавить инструкции в интерфейс

### Вариант 3: Использовать другой тип кампании
- Для текстовых кампаний (`TEXT_CAMPAIGN`) может быть другой формат
- Проверить, работает ли установка бюджета для других типов кампаний

## Рекомендации

1. **Краткосрочное решение:** Улучшить сообщения об ошибках и добавить инструкции
2. **Долгосрочное решение:** Найти способ установить стратегию через API или принять ограничение

## Статус

- ✅ Базовые методы API работают
- ✅ Получение данных работает
- ⚠️ Установка бюджета требует ручной установки стратегии
- ❌ Автоматическая установка стратегии не работает для перфоманс-кампаний

---

**Обновлено:** 04.12.2024






